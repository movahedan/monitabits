openapi: 3.0.0
paths: 
  /api/status: 
    get: 
      operationId: AppController_getStatus
      parameters: 
        []
      responses: 
        "200": 
          description: Service is healthy
          content: 
            application/json: 
              schema: 
                $ref: "#/components/schemas/AppResponseDto"
        "500": 
          description: Service is unhealthy
          content: 
            application/json: 
              schema: 
                $ref: "#/components/schemas/ErrorResponseDto"
      summary: Health check endpoint
      tags: 
        - Health
  /api/timer/current: 
    get: 
      description: "Returns the current timer state (idle, running, paused, or completed)"
      operationId: TimerController_getCurrentTimer
      parameters: 
        []
      responses: 
        "200": 
          description: Timer status retrieved successfully
          content: 
            application/json: 
              schema: 
                $ref: "#/components/schemas/TimerResponseDto"
        "400": 
          description: Invalid request
          content: 
            application/json: 
              schema: 
                $ref: "#/components/schemas/ErrorResponseDto"
      security: 
        &security
        - DeviceAuth: 
            []
      summary: Get current timer status
      tags: 
        &tags
        - Timer
  /api/timer/start: 
    post: 
      description: "Starts a new timer session (work, short break, or long break)"
      operationId: TimerController_startTimer
      parameters: 
        []
      requestBody: 
        required: true
        content: 
          application/json: 
            schema: 
              $ref: "#/components/schemas/StartTimerRequestDto"
      responses: 
        "200": 
          description: Timer started successfully
          content: 
            application/json: 
              schema: 
                $ref: "#/components/schemas/TimerResponseDto"
        "400": 
          description: Invalid request
          content: 
            application/json: 
              schema: 
                $ref: "#/components/schemas/ErrorResponseDto"
      security: 
        *security
      summary: Start a timer
      tags: 
        *tags
  /api/timer/pause: 
    post: 
      description: Pauses the currently running timer
      operationId: TimerController_pauseTimer
      parameters: 
        []
      responses: 
        "200": 
          description: Timer paused successfully
          content: 
            application/json: 
              schema: 
                $ref: "#/components/schemas/TimerResponseDto"
        "400": 
          description: Timer is not running
          content: 
            application/json: 
              schema: 
                $ref: "#/components/schemas/ErrorResponseDto"
      security: 
        *security
      summary: Pause the timer
      tags: 
        *tags
  /api/timer/resume: 
    post: 
      description: Resumes a paused timer
      operationId: TimerController_resumeTimer
      parameters: 
        []
      responses: 
        "200": 
          description: Timer resumed successfully
          content: 
            application/json: 
              schema: 
                $ref: "#/components/schemas/TimerResponseDto"
        "400": 
          description: Timer is not paused
          content: 
            application/json: 
              schema: 
                $ref: "#/components/schemas/ErrorResponseDto"
      security: 
        *security
      summary: Resume the timer
      tags: 
        *tags
  /api/timer/reset: 
    post: 
      description: Resets the timer to idle state
      operationId: TimerController_resetTimer
      parameters: 
        []
      responses: 
        "200": 
          description: Timer reset successfully
          content: 
            application/json: 
              schema: 
                $ref: "#/components/schemas/TimerResponseDto"
        "400": 
          description: Invalid request
          content: 
            application/json: 
              schema: 
                $ref: "#/components/schemas/ErrorResponseDto"
      security: 
        *security
      summary: Reset the timer
      tags: 
        *tags
  /api/settings: 
    get: 
      description: "Returns the current Pomodoro timer settings (work, short break, long break durations)."
      operationId: SettingsController_getSettings
      parameters: 
        []
      responses: 
        "200": 
          description: Settings retrieved successfully
          content: 
            application/json: 
              schema: 
                $ref: "#/components/schemas/SettingsDto"
        "400": 
          description: Time validation failed
          content: 
            application/json: 
              schema: 
                $ref: "#/components/schemas/ErrorResponseDto"
      security: 
        &security1
        - TimeValidation: 
            []
        - DeviceAuth: 
            []
      summary: Get user settings
      tags: 
        &tags1
        - Settings
    put: 
      description: "Updates Pomodoro timer durations (work, short break, long break)."
      operationId: SettingsController_updateSettings
      parameters: 
        []
      requestBody: 
        required: true
        content: 
          application/json: 
            schema: 
              $ref: "#/components/schemas/UpdateSettingsRequestDto"
      responses: 
        "200": 
          description: Settings updated successfully
          content: 
            application/json: 
              schema: 
                $ref: "#/components/schemas/SettingsDto"
        "400": 
          description: Time validation failed or invalid settings
          content: 
            application/json: 
              schema: 
                $ref: "#/components/schemas/ErrorResponseDto"
      security: 
        *security1
      summary: Update user settings
      tags: 
        *tags1
  /api/stats/summary: 
    get: 
      description: Returns statistics about completed Pomodoro sessions including counts and total time.
      operationId: StatisticsController_getSummary
      parameters: 
        []
      responses: 
        "200": 
          description: Statistics summary retrieved successfully
          content: 
            application/json: 
              schema: 
                $ref: "#/components/schemas/StatisticsSummaryDto"
        "400": 
          description: Invalid request
          content: 
            application/json: 
              schema: 
                $ref: "#/components/schemas/ErrorResponseDto"
      security: 
        - DeviceAuth: 
            []
      summary: Get Pomodoro statistics summary
      tags: 
        - Statistics
info: 
  title: Monitabits Pomodoro Timer API
  description: "API for the Pomodoro timer application.\n\nThis API uses device-based authentication where each device has a unique ID.\nEach device can manage its own Pomodoro timer sessions and track completed work sessions.\n\n**Security**: All requests must include device ID header for authentication."
  version: 1.0.0
  contact: 
    {}
tags: 
  - name: Timer
    description: "Pomodoro timer management (start, pause, resume, reset)"
  - name: Settings
    description: "Timer duration settings (work, short break, long break)"
  - name: Statistics
    description: Completed Pomodoro session statistics
servers: 
  - url: http://localhost:3003
    description: Development server
  - url: https://api.monitabits.com
    description: Production server
components: 
  securitySchemes: 
    DeviceAuth: 
      type: apiKey
      in: header
      name: X-Device-Id
      description: Device ID for authentication
  schemas: 
    AppDto: 
      type: object
      properties: 
        ok: 
          type: boolean
      required: 
        - ok
    AppResponseDto: 
      type: object
      properties: 
        data: 
          $ref: "#/components/schemas/AppDto"
      required: 
        - data
    ErrorResponseDto: 
      type: object
      properties: 
        success: 
          type: boolean
          default: false
        error: 
          type: string
        message: 
          type: string
        statusCode: 
          type: number
        timestamp: 
          type: string
          format: date-time
        path: 
          type: string
      required: 
        - success
        - error
        - message
        - statusCode
        - timestamp
        - path
    TimerDto: 
      type: object
      properties: 
        id: 
          type: string
        status: 
          type: string
          enum: 
            - idle
            - running
            - paused
            - completed
        type: 
          type: string
          enum: 
            - work
            - short_break
            - long_break
        durationSeconds: 
          type: number
        remainingSeconds: 
          type: number
        startedAt: 
          type: string
          nullable: true
        pausedAt: 
          type: string
          nullable: true
      required: 
        - id
        - status
        - type
        - durationSeconds
        - remainingSeconds
        - startedAt
        - pausedAt
    TimerResponseDto: 
      type: object
      properties: 
        timer: 
          $ref: "#/components/schemas/TimerDto"
      required: 
        - timer
    StartTimerRequestDto: 
      type: object
      properties: 
        type: 
          type: string
          enum: 
            - work
            - short_break
            - long_break
      required: 
        - type
    SettingsDto: 
      type: object
      properties: 
        workMinutes: 
          type: number
          minimum: 1
          maximum: 120
        shortBreakMinutes: 
          type: number
          minimum: 1
          maximum: 60
        longBreakMinutes: 
          type: number
          minimum: 1
          maximum: 120
        updatedAt: 
          type: string
          format: date-time
      required: 
        - workMinutes
        - shortBreakMinutes
        - longBreakMinutes
        - updatedAt
    UpdateSettingsRequestDto: 
      type: object
      properties: 
        workMinutes: 
          type: number
          minimum: 1
          maximum: 120
        shortBreakMinutes: 
          type: number
          minimum: 1
          maximum: 60
        longBreakMinutes: 
          type: number
          minimum: 1
          maximum: 120
      required: 
        - workMinutes
        - shortBreakMinutes
        - longBreakMinutes
    StatisticsSummaryDto: 
      type: object
      properties: 
        totalCompleted: 
          type: number
        totalWorkSessions: 
          type: number
        totalShortBreaks: 
          type: number
        totalLongBreaks: 
          type: number
        totalTimeSeconds: 
          type: number
        todayCount: 
          type: number
      required: 
        - totalCompleted
        - totalWorkSessions
        - totalShortBreaks
        - totalLongBreaks
        - totalTimeSeconds
        - todayCount