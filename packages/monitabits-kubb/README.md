# @repo/monitabits-kubb

Kubb-generated API client with TypeScript types, SWR hooks, and Zod schemas.

## Overview

This package provides auto-generated code from the OpenAPI specification:
- **TypeScript types** - Type definitions for API requests/responses
- **SWR hooks** - Data fetching hooks for React
- **Zod schemas** - Runtime validation schemas
- **HTTP client** - Configured mutator with automatic headers

## How It Works

```
API starts (dev mode)
    ↓
OpenAPI spec generated from @ApiProperty decorators
    ↓
Written to src/openapi.yaml
    ↓
Kubb generates types/hooks/zod → src/gen/
```

## Usage

### SWR Hooks

```typescript
import { useSettingsControllerGetSettings } from '@repo/monitabits-kubb/gen/hooks';

function Settings() {
  const { data, error, isLoading } = useSettingsControllerGetSettings();
  // ...
}
```

### Types

```typescript
import type { Session, Settings } from '@repo/monitabits-kubb/gen/types';
```

### Zod Schemas

```typescript
import { settingsDtoSchema } from '@repo/monitabits-kubb/gen/zod';
```

## Commands

```bash
bun run kubb        # Regenerate from openapi.yaml
bun run check:types # Type check
```

## Structure

```
src/
├── openapi.yaml    # Auto-generated by API
├── mutator.ts      # HTTP client
└── gen/            # Generated code
    ├── types/      # TypeScript types
    ├── hooks/      # SWR hooks
    └── zod/        # Zod schemas
```

## Notes

- **Never edit `src/gen/`** - Files are auto-generated
- **Regeneration is automatic** when API starts in dev mode
- **Source of truth** is the API's `@ApiProperty` decorators
